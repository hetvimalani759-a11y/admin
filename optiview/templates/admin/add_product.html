{% extends 'admin/base.html' %}
{% block content %}

<h4>Add Product</h4>

<form method="POST" enctype="multipart/form-data" class="card p-4">
    {% csrf_token %}
    <select name="category" id="category" required>
    <option value="">Select Category</option>
    {% for c in categories %}
        <option value="{{ c.id }}">{{ c.name }}</option>
    {% endfor %}
</select>

<select name="subcategory" id="subcategory" required>
    <option value="">Select SubCategory</option>
</select>


    <div class="mb-3">
        <label>Product Name</label>
        <select name="name" class="form-control" required>
            <option>eyeglases</option>
            <option>lens</option>
            <option>frame</option>
        </select>
    
    </div>

    <div class="mb-3">
        <label>Brand</label>
        <input type="text" name="brand" class="form-control" required>
    </div>

    <div class="mb-3">
        <label>Price</label>
        <input type="number" name="price" class="form-control" required>
    </div>
    

    <div class="mb-3">
        <label>Stock</label>
        <input type="number" name="stock" class="form-control" required>
    </div>

    <div class="mb-3">
        <label>Image</label>
        <input type="file" name="image" class="form-control" required>
    </div>

    <button class="btn btn-success">Save Product</button>
    <a href="{% url 'adminpanel:product_list' %}" class="btn btn-secondary">Back</a>
</form>
<script>
document.getElementById("category").addEventListener("change", function () {
    let categoryId = this.value;

    fetch(`/get-subcategories/${categoryId}/`)
        .then(res => res.json())
        .then(data => {
            let sub = document.getElementById("subcategory");
            sub.innerHTML = "<option value=''>Select SubCategory</option>";
            data.forEach(item => {
                sub.innerHTML += `<option value="${item.id}">${item.name}</option>`;
            });
        });
});
</script>


{% endblock %}
