{% extends "admin/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'admin/css/products.css' %}">
{% endblock %}

{% block content %}
<div class="products-page">

  <div class="page-header">
    <h2 class="category-heading ripple-text">ðŸ“¦ Products</h2>
    <a href="{% url 'adminpanel:add_product' %}" class="btn-add">+ Add Product</a>
  </div>

  <!-- Search -->
  <form method="GET" class="search-form">
    <input type="text"
           name="search"
           placeholder="Search product..."
           value="{{ search }}">
    <button type="submit" class="btn-search">Search</button>
  </form>

  <div class="table-card">
    <table class="product-table">
      <thead>
        <tr>
          <th class="img-col">Image</th>
          <th>Name</th>
          <th>Brand</th>
          <th>Price</th>
          <th>Stock</th>
          <th class="actions-col">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for p in products %}
        <tr>
          <td>
            <img src="{{ p.image.url }}" class="product-img" alt="{{ p.name }}">
          </td>
          <td class="name">{{ p.name }}</td>
          <td>{{ p.brand }}</td>
          <td class="price">â‚¹{{ p.price }}</td>
          <td>{{ p.stock }}</td>
          <td class="actions">
            <a href="{% url 'adminpanel:edit_product' p.id %}" class="btn-edit">Edit</a>
            <button type="button"
                    class="btn-delete"
                    data-id="{{ p.id }}"
                    data-name="{{ p.name }}">
              Delete
            </button>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="no-data">No products found</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Delete Modal -->
  <div id="deleteModal" class="modal-overlay">
    <div class="modal-box">
      <h5>Delete Product</h5>
      <p id="deleteText"></p>
      <div class="modal-actions">
        <button type="button" class="modal-cancel" id="cancelDelete">Cancel</button>
        <form id="deleteForm" method="post">
          {% csrf_token %}
          <button type="submit" class="modal-confirm">Delete</button>
        </form>
      </div>
    </div>
  </div>

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'admin/js/products.js' %}"></script>
{% endblock %}
